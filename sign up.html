<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign Up Authentication</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 40px 35px;
      border-radius: 24px;
      box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.1);
      width: 100%;
      max-width: 420px;
      position: relative;
      transform: translateY(0);
      transition: all 0.3s ease;
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: 
        0 35px 70px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.15);
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #2d3748;
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .auth-icon {
      display: flex;
      justify-content: center;
      margin-bottom: 35px;
    }

    .auth-icon .icon-circle {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .auth-icon svg {
      width: 40px;
      height: 40px;
      fill: white;
    }

    .form-group {
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #4a5568;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }

    input, select {
      width: 100%;
      padding: 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 16px;
      color: #2d3748;
      background: rgba(255, 255, 255, 0.8);
      transition: all 0.3s ease;
      outline: none;
    }

    input:focus, select:focus {
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }

    input::placeholder {
      color: #a0aec0;
    }

    .expiry-wrapper {
      display: flex;
      gap: 15px;
    }

    .expiry-wrapper select {
      flex: 1;
    }

    .card-type {
      font-size: 14px;
      font-weight: 600;
      color: #667eea;
      margin-top: 8px;
      min-height: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-type::before {
      content: 'üí≥';
      font-size: 16px;
    }

    .buttons {
      display: flex;
      gap: 15px;
      margin-top: 35px;
    }

    button {
      flex: 1;
      padding: 16px 24px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }

    .btn-reset {
      background: linear-gradient(135deg, #f7fafc, #edf2f7);
      color: #4a5568;
      border: 2px solid #e2e8f0;
    }

    .btn-reset:hover {
      background: linear-gradient(135deg, #edf2f7, #e2e8f0);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .btn-generate {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .btn-generate:hover {
      background: linear-gradient(135deg, #5a67d8, #6b46c1);
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
    }

    .btn-generate:active {
      transform: translateY(0);
    }

    /* Loading state for generate button */
    .btn-generate.loading {
      background: linear-gradient(135deg, #9ca3af, #6b7280);
      cursor: not-allowed;
      pointer-events: none;
    }

    .btn-generate.success {
      background: linear-gradient(135deg, #48bb78, #38a169);
    }

    /* Ripple effect */
    button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: all 0.6s ease;
    }

    button:active::before {
      width: 300px;
      height: 300px;
    }

    /* Loading spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top: 2px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 8px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive design */
    @media (max-width: 480px) {
      .container {
        padding: 30px 25px;
        margin: 10px;
      }
      
      h2 {
        font-size: 24px;
      }
      
      .buttons {
        flex-direction: column;
      }

      .expiry-wrapper {
        flex-direction: column;
        gap: 10px;
      }
    }

    /* Success animation */
    @keyframes success {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .success-animation {
      animation: success 0.6s ease;
    }

    /* Error shake animation */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .error-shake {
      animation: shake 0.5s ease-in-out;
    }

    /* Success message */
    .success-message {
      background: linear-gradient(135deg, #48bb78, #38a169);
      color: white;
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      margin-top: 20px;
      font-weight: 600;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }

    .success-message.show {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Sign Up Authentication</h2>

    <div class="auth-icon">
      <div class="icon-circle">
        <svg viewBox="0 0 24 24">
          <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.6 14.8,10V11C15.4,11 16,11.4 16,12V16C16,16.6 15.6,17 15,17H9C8.4,17 8,16.6 8,16V12C8,11.4 8.4,11 9,11V10C9,8.6 10.6,7 12,7M12,8.2C11.2,8.2 10.2,9.2 10.2,10V11H13.8V10C13.8,9.2 12.8,8.2 12,8.2Z"/>
        </svg>
      </div>
    </div>

    <form>
      <div class="form-group">
        <label for="cardNumber">Card Number</label>
        <div class="input-wrapper">
          <input type="text" id="cardNumber" placeholder="Enter your card number" maxlength="19"/>
        </div>
        <div class="card-type" id="cardTypeDisplay"></div>
      </div>

      <div class="form-group">
        <label for="cvv">CVV/CVC</label>
        <div class="input-wrapper">
          <input type="password" id="cvv" placeholder="Enter CVV" maxlength="4"/>
        </div>
      </div>

      <div class="form-group">
        <label>Card Expiry</label>
        <div class="expiry-wrapper">
          <select id="expiryMonth">
            <option value="">Month</option>
            <option value="01">01 - January</option>
            <option value="02">02 - February</option>
            <option value="03">03 - March</option>
            <option value="04">04 - April</option>
            <option value="05">05 - May</option>
            <option value="06">06 - June</option>
            <option value="07">07 - July</option>
            <option value="08">08 - August</option>
            <option value="09">09 - September</option>
            <option value="10">10 - October</option>
            <option value="11">11 - November</option>
            <option value="12">12 - December</option>
          </select>
          <select id="expiryYear">
            <option value="">Year</option>
          </select>
        </div>
      </div>

      <div class="buttons">
        <button type="button" class="btn-reset" onclick="resetForm()">Reset</button>
        <button type="button" class="btn-generate" onclick="generateOTP()">Generate OTP</button>
      </div>
    </form>

    <div class="success-message" id="successMessage">
      üéâ OTP sent successfully! Redirecting to verification page...
    </div>
  </div>

  <script>
    // Populate year dropdown
    document.addEventListener("DOMContentLoaded", () => {
      const yearSelect = document.getElementById("expiryYear");
      const currentYear = new Date().getFullYear();
      
      // Add years from current year to current year + 20
      for (let year = currentYear; year <= currentYear + 20; year++) {
        const option = document.createElement("option");
        option.value = year;
        option.textContent = year;
        yearSelect.appendChild(option);
      }
      
      // Add card number formatting
      formatCardNumber();
    });

    // Format card number with spaces
    function formatCardNumber() {
      const cardInput = document.getElementById("cardNumber");
      
      cardInput.addEventListener("input", function(e) {
        let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
        let matches = value.match(/\d{4,16}/g);
        let match = matches && matches[0] || '';
        let parts = [];
        
        for (let i = 0, len = match.length; i < len; i += 4) {
          parts.push(match.substring(i, i + 4));
        }
        
        if (parts.length) {
          e.target.value = parts.join(' ');
        } else {
          e.target.value = value;
        }
        
        // Update card type
        const cardType = getCardType(value);
        const display = document.getElementById("cardTypeDisplay");
        display.textContent = cardType ? `${cardType} Card Detected` : "";
        
        // Add animation
        if (cardType) {
          display.style.animation = 'none';
          display.offsetHeight; // Trigger reflow
          display.style.animation = 'success 0.6s ease';
        }
      });
    }

    // Enhanced card type detection
    function getCardType(number) {
      const cleanNumber = number.replace(/\s+/g, '');
      
      if (/^4/.test(cleanNumber)) return "Visa";
      if (/^5[1-5]/.test(cleanNumber)) return "Mastercard";
      if (/^3[47]/.test(cleanNumber)) return "American Express";
      if (/^(60|6521|6522)/.test(cleanNumber)) return "RuPay";
      if (/^35/.test(cleanNumber)) return "JCB";
      if (/^(30|36|38)/.test(cleanNumber)) return "Diners Club";
      if (/^(62|81)/.test(cleanNumber)) return "UnionPay";
      
      return "";
    }

    // CVV validation
    document.getElementById("cvv").addEventListener("input", function(e) {
      this.value = this.value.replace(/[^0-9]/g, '');
      
      // Adjust max length based on card type
      const cardNumber = document.getElementById("cardNumber").value.replace(/\s+/g, '');
      const isAmex = /^3[47]/.test(cardNumber);
      this.maxLength = isAmex ? 4 : 3;
    });

    function resetForm() {
      const container = document.querySelector('.container');
      container.classList.add('success-animation');
      
      setTimeout(() => {
        document.getElementById("cardNumber").value = "";
        document.getElementById("cvv").value = "";
        document.getElementById("expiryMonth").value = "";
        document.getElementById("expiryYear").value = "";
        document.getElementById("cardTypeDisplay").textContent = "";
        
        // Hide success message if visible
        const successMessage = document.getElementById("successMessage");
        successMessage.classList.remove('show');
        
        // Reset button state
        const generateBtn = document.querySelector('.btn-generate');
        generateBtn.classList.remove('loading', 'success');
        generateBtn.innerHTML = "Generate OTP";
        
        container.classList.remove('success-animation');
      }, 300);
    }

    function generateOTP() {
      const card = document.getElementById("cardNumber").value.trim();
      const cvv = document.getElementById("cvv").value.trim();
      const month = document.getElementById("expiryMonth").value;
      const year = document.getElementById("expiryYear").value;
      const button = document.querySelector('.btn-generate');
      const container = document.querySelector('.container');

      if (!card || !cvv || !month || !year) {
        // Enhanced error styling with shake animation
        const emptyFields = [];
        if (!card) emptyFields.push(document.getElementById("cardNumber"));
        if (!cvv) emptyFields.push(document.getElementById("cvv"));
        if (!month) emptyFields.push(document.getElementById("expiryMonth"));
        if (!year) emptyFields.push(document.getElementById("expiryYear"));
        
        emptyFields.forEach(field => {
          field.style.borderColor = "#e53e3e";
          field.style.boxShadow = "0 0 0 3px rgba(229, 62, 62, 0.1)";
          
          // Add shake animation to container
          container.classList.add('error-shake');
          
          setTimeout(() => {
            field.style.borderColor = "#e2e8f0";
            field.style.boxShadow = "none";
            container.classList.remove('error-shake');
          }, 3000);
        });
        
        alert("‚ö†Ô∏è Please fill out all required fields.");
        return;
      }

      // Validate card number length
      const cleanCard = card.replace(/\s+/g, '');
      if (cleanCard.length < 13 || cleanCard.length > 19) {
        document.getElementById("cardNumber").style.borderColor = "#e53e3e";
        container.classList.add('error-shake');
        alert("‚ö†Ô∏è Please enter a valid card number.");
        setTimeout(() => {
          document.getElementById("cardNumber").style.borderColor = "#e2e8f0";
          container.classList.remove('error-shake');
        }, 3000);
        return;
      }

      // Validate CVV length
      if (cvv.length < 3) {
        document.getElementById("cvv").style.borderColor = "#e53e3e";
        container.classList.add('error-shake');
        alert("‚ö†Ô∏è Please enter a valid CVV.");
        setTimeout(() => {
          document.getElementById("cvv").style.borderColor = "#e2e8f0";
          container.classList.remove('error-shake');
        }, 3000);
        return;
      }

      // Check if card is expired
      const selectedDate = new Date(year, month - 1);
      const currentDate = new Date();
      currentDate.setDate(1); // Set to first day of current month for comparison
      
      if (selectedDate < currentDate) {
        document.getElementById("expiryMonth").style.borderColor = "#e53e3e";
        document.getElementById("expiryYear").style.borderColor = "#e53e3e";
        container.classList.add('error-shake');
        alert("‚ö†Ô∏è Card expiry date cannot be in the past.");
        setTimeout(() => {
          document.getElementById("expiryMonth").style.borderColor = "#e2e8f0";
          document.getElementById("expiryYear").style.borderColor = "#e2e8f0";
          container.classList.remove('error-shake');
        }, 3000);
        return;
      }

      // Start loading state
      button.classList.add('loading');
      button.innerHTML = '<span class="spinner"></span>Processing...';
      
      // Simulate processing time
      setTimeout(() => {
        // Success state
        button.classList.remove('loading');
        button.classList.add('success');
        button.innerHTML = "‚úì OTP Sent!";
        
        // Show success message
        const successMessage = document.getElementById("successMessage");
        successMessage.classList.add('show');
        
        // Success animation for container
        container.classList.add('success-animation');
        
        // Redirect after 2 seconds
        setTimeout(() => {
          // Redirect to generate otp.html
          window.location.href = "generate otp.html";
        }, 2000);
        
      }, 1500); // Simulate 1.5 second processing time
    }

    // Add subtle animations on form interaction
    document.querySelectorAll('input, select').forEach(input => {
      input.addEventListener('focus', function() {
        this.parentElement.style.transform = 'scale(1.02)';
      });
      
      input.addEventListener('blur', function() {
        this.parentElement.style.transform = 'scale(1)';
      });
    });

    // Real-time validation feedback
    document.getElementById("cardNumber").addEventListener("blur", function() {
      const cleanCard = this.value.replace(/\s+/g, '');
      if (cleanCard.length > 0 && (cleanCard.length < 13 || cleanCard.length > 19)) {
        this.style.borderColor = "#e53e3e";
        setTimeout(() => {
          this.style.borderColor = "#e2e8f0";
        }, 2000);
      }
    });

    document.getElementById("cvv").addEventListener("blur", function() {
      if (this.value.length > 0 && this.value.length < 3) {
        this.style.borderColor = "#e53e3e";
        setTimeout(() => {
          this.style.borderColor = "#e2e8f0";
        }, 2000);
      }
    });
  </script>
</body>
</html>